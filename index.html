<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machinations „Ç∑„Éü„É•„É¨„Éº„Çø„Éº</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header id="header">
            <div class="header-left">
                <h1>Machinations „Ç∑„Éü„É•„É¨„Éº„Çø„Éº</h1>
            </div>
            <div class="header-center">
                <button id="btn-new" title="Êñ∞Ë¶è„ÉÄ„Ç§„Ç¢„Ç∞„É©„É† (Ctrl+N)">Êñ∞Ë¶è</button>
                <button id="btn-save" title="‰øùÂ≠ò (Ctrl+S)">‰øùÂ≠ò</button>
                <button id="btn-load" title="Ë™≠Ëæº">Ë™≠Ëæº</button>
                <input type="file" id="file-input" accept=".json" style="display:none">
                <span class="separator"></span>
                <button id="btn-run" title="ÂÆüË°å (Space)" class="sim-btn">&#9654; ÂÆüË°å</button>
                <button id="btn-stop" title="ÂÅúÊ≠¢ (Space)" class="sim-btn" disabled>&#9724; ÂÅúÊ≠¢</button>
                <button id="btn-step" title="„Çπ„ÉÜ„ÉÉ„Éó (S)" class="sim-btn">&#9197; „Çπ„ÉÜ„ÉÉ„Éó</button>
                <span class="separator"></span>
                <label class="speed-label">ÈÄüÂ∫¶:
                    <input type="range" id="speed-slider" min="1" max="20" value="5" title="„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÈÄüÂ∫¶">
                    <span id="speed-value">5</span>
                </label>
                <span class="separator"></span>
                <button id="btn-undo" title="ÂÖÉ„Å´Êàª„Åô (Ctrl+Z)">‚Ü©</button>
                <button id="btn-redo" title="„ÇÑ„ÇäÁõ¥„Åó (Ctrl+Y)">‚Ü™</button>
                <span class="separator"></span>
                <div class="sample-dropdown">
                    <button id="btn-samples">„Çµ„É≥„Éó„É´ ‚ñº</button>
                    <div class="sample-menu" id="sample-menu">
                        <button data-sample="economy">„Ç∑„É≥„Éó„É´ÁµåÊ∏à</button>
                        <button data-sample="engine">„ÉÄ„Ç§„Éä„Éü„ÉÉ„ÇØ„Ç®„É≥„Ç∏„É≥</button>
                        <button data-sample="monopoly">Ê≠£„ÅÆ„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ</button>
                    </div>
                </div>
                <span class="separator"></span>
                <button id="btn-theme" title="„ÉÜ„Éº„ÉûÂàáÊõø">üåô</button>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div id="main-content">
            <!-- „ÉÑ„Éº„É´„Éê„Éº -->
            <aside id="toolbar">
                <div class="tool-section">
                    <h3>„ÉÑ„Éº„É´</h3>
                    <button class="tool-btn active" data-tool="select" title="ÈÅ∏Êäû„ÉÑ„Éº„É´ (1)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z" fill="currentColor"/></svg>
                        <span>ÈÅ∏Êäû</span>
                    </button>
                </div>
                <div class="tool-section">
                    <h3>„Éé„Éº„Éâ</h3>
                    <button class="tool-btn" data-tool="pool" title="„Éó„Éº„É´ (2)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„Éó„Éº„É´</span>
                    </button>
                    <button class="tool-btn" data-tool="source" title="„ÇΩ„Éº„Çπ (3)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><polygon points="12,2 22,22 2,22" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„ÇΩ„Éº„Çπ</span>
                    </button>
                    <button class="tool-btn" data-tool="drain" title="„Éâ„É¨„Ç§„É≥ (4)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><polygon points="12,22 22,2 2,2" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„Éâ„É¨„Ç§„É≥</span>
                    </button>
                    <button class="tool-btn" data-tool="converter" title="„Ç≥„É≥„Éê„Éº„Çø„Éº (5)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><polygon points="2,12 12,2 22,12 12,22" fill="none" stroke="currentColor" stroke-width="2" transform="rotate(45 12 12)"/></svg>
                        <span>„Ç≥„É≥„Éê„Éº„Çø„Éº</span>
                    </button>
                    <button class="tool-btn" data-tool="gate" title="„Ç≤„Éº„Éà (6)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><polygon points="12,2 22,12 12,22 2,12" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„Ç≤„Éº„Éà</span>
                    </button>
                    <button class="tool-btn" data-tool="trader" title="„Éà„É¨„Éº„ÉÄ„Éº (7)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><polygon points="12,2 15,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 9,9" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„Éà„É¨„Éº„ÉÄ„Éº</span>
                    </button>
                    <button class="tool-btn" data-tool="register" title="„É¨„Ç∏„Çπ„Çø„Éº (8)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><rect x="3" y="5" width="18" height="14" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„É¨„Ç∏„Çπ„Çø„Éº</span>
                    </button>
                    <button class="tool-btn" data-tool="endCondition" title="„Ç®„É≥„Éâ„Ç≥„É≥„Éá„Ç£„Ç∑„Éß„É≥ (9)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="7" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„Ç®„É≥„Éâ</span>
                    </button>
                    <button class="tool-btn" data-tool="chart" title="„ÉÅ„É£„Éº„Éà (0)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><rect x="2" y="2" width="20" height="20" rx="3" fill="none" stroke="currentColor" stroke-width="2"/><polyline points="5,18 9,10 13,14 17,6 21,8" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                        <span>„ÉÅ„É£„Éº„Éà</span>
                    </button>
                </div>
                <div class="tool-section">
                    <h3>Êé•Á∂ö</h3>
                    <button class="tool-btn" data-tool="resourceConnection" title="„É™„ÇΩ„Éº„ÇπÊé•Á∂ö (R)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><line x1="2" y1="12" x2="18" y2="12" stroke="currentColor" stroke-width="2"/><polygon points="18,8 24,12 18,16" fill="currentColor"/></svg>
                        <span>Êé•Á∂ö</span>
                    </button>
                    <button class="tool-btn" data-tool="stateConnection" title="Áä∂ÊÖãÊé•Á∂ö (T)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><line x1="2" y1="12" x2="18" y2="12" stroke="currentColor" stroke-width="2" stroke-dasharray="4,3"/><polygon points="18,8 24,12 18,16" fill="currentColor"/></svg>
                        <span>Áä∂ÊÖãÊé•Á∂ö</span>
                    </button>
                </div>
                <div class="tool-section">
                    <h3>Êìç‰Ωú</h3>
                    <button class="tool-btn" data-tool="delete" title="ÂâäÈô§ (Del)">
                        <svg viewBox="0 0 24 24" width="20" height="20"><line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2"/><line x1="20" y1="4" x2="4" y2="20" stroke="currentColor" stroke-width="2"/></svg>
                        <span>ÂâäÈô§</span>
                    </button>
                </div>
            </aside>

            <!-- SVG„Ç≠„É£„É≥„Éê„Çπ -->
            <main id="canvas-container">
                <svg id="canvas" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                        </marker>
                        <marker id="arrowhead-dark" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#ccc"/>
                        </marker>
                        <marker id="arrowhead-state" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
                        </marker>
                        <marker id="arrowhead-state-dark" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#999"/>
                        </marker>
                        <marker id="trigger-marker" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
                            <path d="M3,2 L6,10 L9,2" fill="none" stroke="#ff9800" stroke-width="2"/>
                        </marker>
                        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                            <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="0.5" class="grid-line"/>
                        </pattern>
                    </defs>
                    <rect id="grid-bg" width="100%" height="100%" fill="url(#grid)"/>
                    <g id="canvas-group">
                        <g id="connections-layer"></g>
                        <g id="animations-layer"></g>
                        <g id="nodes-layer"></g>
                    </g>
                    <g id="temp-connection" style="pointer-events:none"></g>
                </svg>
            </main>

            <!-- „Éó„É≠„Éë„ÉÜ„Ç£„Éë„Éç„É´ -->
            <aside id="properties-panel">
                <h3>„Éó„É≠„Éë„ÉÜ„Ç£</h3>
                <div id="properties-content">
                    <p class="placeholder">Ë¶ÅÁ¥†„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>
            </aside>
        </div>

        <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„Éº -->
        <footer id="statusbar">
            <span id="status-step">„Çπ„ÉÜ„ÉÉ„Éó: 0</span>
            <span class="separator"></span>
            <span id="status-nodes">„Éé„Éº„Éâ: 0</span>
            <span class="separator"></span>
            <span id="status-connections">Êé•Á∂ö: 0</span>
            <span class="separator"></span>
            <span id="status-resources">Á∑è„É™„ÇΩ„Éº„Çπ: 0</span>
            <span class="separator"></span>
            <span id="status-info">Ê∫ñÂÇôÂÆå‰∫Ü</span>
        </footer>
    </div>

    <script src="js/graph.js"></script>
    <script src="js/engine.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/properties.js"></script>
    <script src="js/toolbar.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/io.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
